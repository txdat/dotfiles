- nfs

  ```bash
  sudo cp nfs.yaml /var/lib/rancher/k3s/server/manifests
  ```

  add to `/etc/exports` (no symlink)

  ```
  /path/to/exporting/dir <ip_addr>(rw,sync,no_root_squash,no_subtree_check)
  ```

  run `sudo exportfs -arv` to export nfs

  Or just run

  ```bash
  sudo ./nfs.sh /path/to/exporting/dir
  ```

- add user to kube

  ```
  mkdir -p ~/.kube
  sudo cp /etc/rancher/k3s/k3s.yaml ~/.kube/config
  sudo chown -R $USER:$USER ~/.kube
  ```

- [nvidia-container-runtime](https://github.com/k3s-io/k3s/issues/4391#issuecomment-1233314825)

  ```bash
  sudo mkdir -p /etc/docker && sudo ln -s ~/.dotfiles/k3s/docker/daemon.json /etc/docker/daemon.json
  sudo mkdir -p /etc/containerd && sudo ln -s ~/.dotfiles/k3s/containerd/config.toml /etc/containerd/config.toml
  sudo k3s kubectl apply -f nvidia.yaml
  ```

- access kube's services' ip addresses

  insert **kube-dns ip** (`kubectl get svc -n kube-system | grep dns` = `10.43.0.10`) at 1st line of `/etc/resolv.conf`

  ```
  # Generated by NetworkManager
  nameserver 10.43.0.10 # <----
  nameserver 8.8.8.8
  nameserver fe80::1%enp0s31f6
  ```

  lock editing `sudo chattr +i /etc/resolv.conf`, unlock `sudo chattr -i /etc/resolv.conf`

  => `<service>:<port>` becomes `<service>.<namespace>.svc.cluster.local:<port>`
